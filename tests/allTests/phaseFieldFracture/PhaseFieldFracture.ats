import os
import geos_ats 
from geos_ats.test_builder import TestDeck, RestartcheckParameters, generate_geos_tests

restartcheck_params = {}
restartcheck_params["atol"] = 1.0E-6
restartcheck_params["rtol"] = 1.0E-6

# format: (<input>, <desc>, <partition_list>, <restart_step>, <total_steps>)
decks = (
    ("PhaseFieldFracture_DamageOnly", "Testing the Damage Solver of Phase Field Fracture", ((1, 1, 1), (2, 2, 2)), 1,
     2),
    (
        "PhaseFieldFracture_DamageAndLoad",
        "Testing the coupling of Mechanics and Damage for PF Fracture",
        ((1, 1, 1), (2, 2, 2)),    # not enough z layers for 27 ranks
        65,
        130),
    (
        "PhaseFieldFracture_CohesiveModel",
        "Testing the cohesive model for PF Fracture",
        ((1, 1, 1), (1, 1, 2)),    # not enough z layers for 27 ranks
        5,
        10),
    (
        "PhaseFieldFracture_SpectralSplit",
        "Testing the spectral split of the stress tensor in PF Fracture",
        ((1, 1, 1), (2, 2, 1)),    # not enough z layers for 27 ranks
        15,
        30),
    (
        "PhaseFieldFracture_VolDevSplit",
        "Testing the volumetric-deviatoric split of the stress tensor in PF Fracture",
        ((1, 1, 1), (2, 2, 1)),    # not enough z layers for 27 ranks
        15,
        30),
    (
        "PhaseFieldFracture_Nucleation_smoke",
        "Testing the nucleation model for PF Fracture",
        ((1, 1, 1), (2, 2, 1)),    # not enough z layers for 27 ranks
        65,
        130))

generate_geos_tests_from_values( decks, restartcheck_params )